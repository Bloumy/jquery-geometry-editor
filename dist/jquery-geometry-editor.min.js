!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("turf-polygon");b.exports=function(a){var b=[a[0],a[1]],c=[a[0],a[3]],e=[a[2],a[3]],f=[a[2],a[1]],g=d([[b,f,e,c,b]]);return g}},{"turf-polygon":2}],2:[function(a,b,c){b.exports=function(a,b){if(null===a)throw new Error("No coordinates passed");for(var c=0;c<a.length;c++)for(var d=a[c],e=0;e<d[d.length-1].length;e++){if(d.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(d[d.length-1][e]!==d[0][e])throw new Error("First and last Position are not equivalent.")}var f={type:"Feature",geometry:{type:"Polygon",coordinates:a},properties:b};return f.properties||(f.properties={}),f}},{}],3:[function(a,b,c){var d=a("turf-meta").coordEach;b.exports=function(a){var b=[1/0,1/0,-(1/0),-(1/0)];return d(a,function(a){b[0]>a[0]&&(b[0]=a[0]),b[1]>a[1]&&(b[1]=a[1]),b[2]<a[0]&&(b[2]=a[0]),b[3]<a[1]&&(b[3]=a[1])}),b}},{"turf-meta":4}],4:[function(a,b,c){function d(a,b,c){var d,e,f,g,h,i,j,k,m,n=0,o="FeatureCollection"===a.type,p="Feature"===a.type,q=o?a.features.length:1;for(d=0;q>d;d++)for(k=o?a.features[d].geometry:p?a.geometry:a,m="GeometryCollection"===k.type,i=m?k.geometries.length:1,g=0;i>g;g++)if(h=m?k.geometries[g]:k,j=h.coordinates,n=!c||"Polygon"!==h.type&&"MultiPolygon"!==h.type?0:1,"Point"===h.type)b(j);else if("LineString"===h.type||"MultiPoint"===h.type)for(e=0;e<j.length;e++)b(j[e]);else if("Polygon"===h.type||"MultiLineString"===h.type)for(e=0;e<j.length;e++)for(f=0;f<j[e].length-n;f++)b(j[e][f]);else{if("MultiPolygon"!==h.type)throw new Error("Unknown Geometry Type");for(e=0;e<j.length;e++)for(f=0;f<j[e].length;f++)for(l=0;l<j[e][f].length-n;l++)b(j[e][f][l])}}function e(a,b,c,e){return d(a,function(a){c=b(c,a)},e),c}function f(a,b){var c;switch(a.type){case"FeatureCollection":for(features=a.features,c=0;c<a.features.length;c++)b(a.features[c].properties);break;case"Feature":b(a.properties)}}function g(a,b,c){return f(a,function(a){c=b(c,a)}),c}b.exports.coordEach=d,b.exports.coordReduce=e,b.exports.propEach=f,b.exports.propReduce=g},{}],5:[function(a,b,c){(function(c){var d=a("./util/guid.js"),e="undefined"!=typeof window?window.L:"undefined"!=typeof c?c.L:null,f="undefined"!=typeof window?window.L.Control.Draw:"undefined"!=typeof c?c.L.Control.Draw:null,g=a("turf-bbox-polygon"),h=a("turf-extent"),i=a("./defaultParams.js"),j=a("./util/featureCollectionToGeometry.js"),k=a("./util/geometryToSimpleGeometries"),l=a("./util/isSingleGeometryType.js"),m=function(a,b){this.dataElement=a,this.settings={},$.extend(!0,this.settings,i,b),this.map=this.initMap(),this.initDrawLayer(),this.settings.editable&&this.initDrawControls(),this.settings.hide&&this.dataElement.hide()};m.prototype.initMap=function(){var a="map-"+d(),b=$('<div id="'+a+'"></div>');b.addClass("map"),b.css("width",this.settings.width),b.css("height",this.settings.height),b.insertAfter(this.dataElement);var c=e.map(a).setView([this.settings.lat,this.settings.lon],this.settings.zoom);for(var f in this.settings.tileLayers){var g=this.settings.tileLayers[f];e.tileLayer(g.url,{attribution:g.attribution,maxZoom:18}).addTo(c)}return c},m.prototype.isDataElementAnInput=function(){return"undefined"!=typeof this.dataElement.attr("value")},m.prototype.getRawData=function(){return this.isDataElementAnInput()?$.trim(this.dataElement.val()):$.trim(this.dataElement.html())},m.prototype.setRawData=function(a){var b=this.getRawData();b!==a&&(this.isDataElementAnInput()?this.dataElement.val(a):this.dataElement.html(a),this.dataElement.trigger("change"))},m.prototype.setGeometry=function(a){a instanceof Array&&4===a.length&&(a=g(a).geometry),this.drawLayer.clearLayers();var b=k(a),c=this;e.geoJson(b,{onEachFeature:function(a,b){c.drawLayer.addLayer(b)}}),0!==b.length&&this.map.fitBounds(this.drawLayer.getBounds()),this.serializeGeometry()},m.prototype.initDrawLayer=function(){this.drawLayer=e.featureGroup().addTo(this.map),this.updateDrawLayer(),this.dataElement.on("change",this.updateDrawLayer.bind(this))},m.prototype.updateDrawLayer=function(){var a=this.getRawData();if(""!==a){var b=JSON.parse(a);this.setGeometry(b)}},m.prototype.getGeometryType=function(){return this.settings.geometryType},m.prototype.canEdit=function(a){return"Rectangle"===a&&-1!==this.getGeometryType().indexOf("Polygon")?!0:"Geometry"===this.getGeometryType()?!0:"GeometryCollection"===this.getGeometryType()?!0:-1!==this.getGeometryType().indexOf(a)?!0:!1},m.prototype.initDrawControls=function(){var a={draw:{position:"topleft",marker:this.canEdit("Point"),polyline:this.canEdit("LineString"),polygon:this.canEdit("Polygon"),rectangle:this.canEdit("Rectangle"),circle:!1},edit:{featureGroup:this.drawLayer}},b=new f(a);this.map.addControl(b);var c=this;this.map.on("draw:created",function(a){l(c.getGeometryType())&&c.drawLayer.clearLayers(),c.drawLayer.addLayer(a.layer),c.serializeGeometry()}),this.map.on("draw:deleted",function(a){c.serializeGeometry()}),this.map.on("draw:edited",function(a){c.serializeGeometry()})},m.prototype.serializeGeometry=function(){var a=this.drawLayer.toGeoJSON(),b=j(a);b?"Rectangle"===this.getGeometryType()?this.setRawData(JSON.stringify(h(b))):this.setRawData(JSON.stringify(b)):this.setRawData("")},b.exports=m}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./defaultParams.js":6,"./util/featureCollectionToGeometry.js":7,"./util/geometryToSimpleGeometries":9,"./util/guid.js":10,"./util/isSingleGeometryType.js":11,"turf-bbox-polygon":1,"turf-extent":3}],6:[function(a,b,c){var d={tileLayers:[{url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'Map data Â© <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'}],hide:!0,editable:!0,width:"100%",height:"500",lon:2,lat:45,zoom:4,geometryType:"Geometry"};b.exports=d},{}],7:[function(a,b,c){var d=a("./geometriesToCollection.js"),e=function(a){var b=[];return a.features.forEach(function(a){b.push(a.geometry)}),0===b.length?null:1==b.length?b[0]:d(b)};b.exports=e},{"./geometriesToCollection.js":8}],8:[function(a,b,c){var d=function(a){var b={};a.forEach(function(a){"undefined"==typeof b[a.type]?b[a.type]=1:b[a.type]++});var c=Object.keys(b);if(c.length>1)return{type:"GeometryCollection",geometries:a};var d="Multi"+Object.keys(b)[0],e=[];return a.forEach(function(a){e.push(a.coordinates)}),{type:d,coordinates:e}};b.exports=d},{}],9:[function(a,b,c){var d=function(a){var b=[],c=a.type.substring("Multi".length);return a.coordinates.forEach(function(a){b.push({type:c,coordinates:a})}),b},e=function(a){var b=[];return a.geometries.forEach(function(a){b.push(a)}),b},f=function(a){switch(a.type){case"Point":case"LineString":case"Polygon":return[a];case"MultiPoint":case"MultiLineString":case"MultiPolygon":return d(a);case"GeometryCollection":return e(a);default:throw"unsupported geometry type : "+a.type}};b.exports=f},{}],10:[function(a,b,c){var d=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};b.exports=d},{}],11:[function(a,b,c){var d=function(a){return-1!==["Point","LineString","Polygon","Rectangle"].indexOf(a)};b.exports=d},{}],12:[function(a,b,c){(function(b){var c="undefined"!=typeof window?window.jQuery:"undefined"!=typeof b?b.jQuery:null,d={defaultParams:a("./ge/defaultParams"),GeometryEditor:a("./ge/GeometryEditor")};c.fn.geometryEditor=function(a){return this.each(function(){var b=$(this),c=new d.GeometryEditor(b,a);b.data("editor",c)})},b.ge=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ge/GeometryEditor":5,"./ge/defaultParams":6}]},{},[12]);